<!--

To add to the basket simply call add to basket and pass it the correct paramaters

-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Sock Shop</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=800, initial-scale=1">
</head>

<script>
$( document ).ready(function() {
  var total = 0;
  var items = 0;
  var promo = 0;
  var basket = new Map()

  class BasketOption{
    constructor(productID,productname,size,quantity,price){
      this.productID = productID
      this.productname = productname
      this.size = size
      this.quantity = quantity
      this.price = price
      basket.set(productID, this)
    }
  }

  $('#promoButton').click(function(){
    if($('#promocode').val().toLowerCase()=="socks10"){
      promo = 0.1
      updateTotal()
    }
  });

  function updateTotal(){
    $('#items').text(items + " Items");
    $('#firsttotal').text("£"+total);
    $('#promo').text((promo*100)+"%")
    $('#secondtotal').text("£"+(1-promo)*total)
  }

  function addToBasket(productname,productID,size,quantity,price){
    new BasketOption(productID,productname,size,quantity,price)
    total += (price*quantity);
    items += quantity;
    var newItem = [
      "<tr id=\"table"+productID+"\">",
        "<td><img src=\"../productPics/"+productID+"/1.jpg\" style=\"width:100px; height:100px;\">"+productname+"</td>",
        "<td style=\"padding-top:50px;\">"+size+"</td>",
        "<td style=\"padding-top:50px;\">"+quantity+"</td>",
        "<td style=\"padding-top:50px;\">£"+price+"</td>",
        "<td style=\"padding-top:50px;\">£"+(quantity*price)+"</td>",
        "<td style=\"padding-top:40px;\"><button id=\"button"+productID+"\" type=\"submit\" class=\"btn btn-default\">Remove</button></td>",
      "</tr>"
    ]

    updateTotal();
    $("#basket").append(newItem.join(''));

    $('#button'+productID).click(function(){
        var temp = basket.get(productID)
        total -= (temp.price*temp.quantity)
        items -= temp.quantity
        updateTotal()
        $("#table"+productID).remove()
        basket.delete(productID)
    })
  }

  addToBasket("Sports","0","Small",4,10);
  addToBasket("Sports","1","Small",4,10);
  addToBasket("Sports","2","Small",4,10);
  addToBasket("Sports","3","Small",4,10);
  addToBasket("Sports","4","Small",4,10);
  addToBasket("Sports","5","Small",4,10);
  addToBasket("Sports","6","Small",4,10);
  addToBasket("Sports","7","Small",4,10);
  addToBasket("Sports","8","Small",4,10);
  addToBasket("Sports","9","Small",4,10);
  addToBasket("Sports","10","Small",4,10);
  addToBasket("Sports","11","Small",4,10);
  addToBasket("Sports","12","Small",4,10);
  addToBasket("Sports","13","Small",4,10);
  addToBasket("Sports","14","Small",4,10);
});
</script>

<body>
  <div class="container">

    <!-- The navbar -->
    <nav class="nav navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Sock Shop</a>
        </div>
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
          <li><a href="#">Stores</a></li>
          <li><a href="#">My Account</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#">Login</a></li>
        </ul>
        <form class="navbar-form navbar-right">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
          <button type="submit" class="btn btn-default">Submit</button>
        </form>
      </div>
    </nav>

    <!-- Basket Pane -->
    <div class="container col-md-8 pre-scrollable" style="max-height:600px; padding-top:50px; padding-bottom:50px">
      <table class="table col-md-12">
        <thead>
          <tr>
            <th>Product</th>
            <th>Size</th>
            <th>Quantiy</th>
            <th>Price</th>
            <th>Total</th>
            <th>Delete</th>
          </tr>
        </thead>
        <tbody id="basket">
        </tbody>
      </table>
    </div>

    <!-- to Checkout Pane -->
    <div class="container col-md-4" style="padding:30px">
      <h2 style="text-align:center;">Order Summary</h2>
      <div class="container col-md-6" style="text-align:right; font-size:120%;">
        <p id="items">5 Items</p>
        <p id="promo">0%</p>
        <p>Total</p>
      </div>
      <div class="container col-md-6" style="text-align:center; font-size:120%;">
        <p id="firsttotal">£120</p>
        <p>Promo</p>
        <p id="secondtotal">£120</p>
      </div>
      <hr/>
      <div class="container col-md-6" style="text-align:center; font-size:120%;">
        <input type="text" class="form-control" placeholder="promo code" id="promocode">
      </div>
      <div class="container col-md-6" style="text-align:center; font-size:120%;">
        <button type="button" class="btn btn-primary btn-md" id="promoButton">Apply</button>
      </div>
      <div class="container col-md-12" style="text-align:center;">
        <button type="button" class="btn btn-primary btn-md" id="continue" style="margin-top:30px;">Continue</button>
      </div>
    </div>

    <!-- The footer -->
    <div class="col-md-12" style="background-color:grey; padding-top:20px;">
      <ul class="col-md-4" style="text-align:center; list-style-type: none;">
        <li>Company</li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
        <li><a href="#">Careers</a></li>
      </ul>
      <ul class="col-md-4" style="text-align:center; list-style-type: none;">
        <li>More</li>
        <li><a href="#">Acessibility</a></li>
        <li><a href="#">Legal</a></li>
        <li><a href="#">Privacy</a></li>
        <li><a href="#">Terms of Use</a></li>
      </ul>
      <ul class="col-md-4" style="text-align:center; list-style-type: none;">
        <li>Login</li>
        <li><a href="#">Staff</a></li>
        <li><a href="#">Manufacturer</a></li>
        <li><a href="#">Customer</a></li>
      </ul>
    </div>

  </div>
</body>
</html>

</html>
